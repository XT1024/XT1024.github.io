---
layout: post
title: 互斥锁与条件变量
category: blog
description: 记录互斥锁与条件变量的使用方式，以及常见的工程应用
---

## 互斥锁与条件变量

互斥锁是用于线程间同步的控制量，避免发生多线程间读写的冲突。

```c++
						// |              thread_1                           	||        thread_2				||
int a = 1;				// | _ _ _ _ || _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ ||_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ ||
a = a + 1;				// |int tmp = a + 1; cpu时间被切到thread_2        		||int tmp1 = a + 1;切回thread_1 	||	
						// |a = tmp; 此时a = 2; thread_1执行完成，切回到thread_2	|| a = tmp1; 				   	|| 
						// -----------------------------------------------------||------------------------------
						//  thread_1 thread_2执行完后a = 2 (而本意是thread_1 和 thread_2各执行一次)
```
由于线程可能执行到任意阶段，被操作系统切换到其他执行线程上，由此会导致多个线程共享状态时出现冲突。

 > `互斥锁`则是用于线程间同步的手段，只有获得互斥锁所有权的线程可继续执行，其余线程将阻塞，直至互斥锁被释放。

 以下述图描述互斥锁的原理~~
 # TODO